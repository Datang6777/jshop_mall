{"version":3,"sources":["webpack:///src/components/Payment.vue","webpack:///./src/components/Payment.vue?22a4","webpack:///./src/components/Payment.vue","webpack:///src/pages/order/CashierDesk.vue","webpack:///./src/pages/order/CashierDesk.vue?0737","webpack:///./src/pages/order/CashierDesk.vue"],"names":["Payment","props","payments","type","Array","default","money","String","methods","payment","code","this","$emit","components_Payment","render","_vm","_h","$createElement","_c","_self","_l","item","index","key","staticClass","on","click","$event","attrs","src","img","_v","_s","name","memo","__webpack_require__","_e","staticRenderFns","CashierDesk","components","normalizeComponent","ssrContext","data","ids","$route","query","recharge","order_amount","userInfo","popShow","created","_this2","orderDetail","$dialog","toast","mes","timeout","callback","$router","go","getUserInfo","getPaymentType","computed","payType","get","set","val","_this3","$api","order_id","res","_this4","paymentList","GLOBAL","isWeiXinBrowser","filter","is_online","forEach","$set","_this5","status","pay","_this6","payment_code","payment_type","trade_type","_data","_this","WeixinJSBridge","invoke","appId","appid","timeStamp","nonceStr","package","signType","paySign","err_msg","replace","path","return_url","locationHost","location","href","mweb_url","alert","msg","StandardPost","url","confirm","title","opts","txt","color","push","tempForm","document","createElement","id","action","target","input","k","value","appendChild","addEventListener","body","dispatchEvent","Event","submit","removeChild","completed","heavyLoad","watch","order_CashierDesk","slot","domProps","innerHTML","balance","position","width","close-on-masker","model","$$v","expression","CashierDesk_Component","CashierDesk_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/21.e5f3da845538de1040b6.js","sourcesContent":["<template>\r\n    <div v-if=\"payments.length\">\r\n        <div class=\"payment\" v-for=\"(item, index) in payments\" :key=\"index\"  @click=\"payment(item.code)\">\r\n            <img class=\"payment-img\" :src=\"item.img\"/>\r\n            <div class=\"payment-left\">\r\n                <h3>{{ item.name }}</h3>\r\n                <p v-if=\"item.code === 'balancepay'\">当前余额: {{money}}</p>\r\n                <p v-else>{{ item.memo }}</p>\r\n            </div>\r\n            <img class=\"right-img\" src=\"../../static/image/right.png\"/>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        payments: {\r\n            type: Array,\r\n            default () {\r\n                return []\r\n            }\r\n        },\r\n        money: {\r\n            type: String,\r\n            default () {\r\n                return '0'\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        payment (code) {\r\n            this.$emit('pay', code)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .payment{\r\n        background-color: #fff;\r\n        text-align: left;\r\n        padding: .35rem .2rem;\r\n        position: relative;\r\n        margin-bottom: 1px;\r\n    }\r\n    .payment-img{\r\n        width: 1rem;\r\n        height: auto;\r\n        padding-right: .15rem;\r\n    }\r\n    .payment-left{\r\n        display: inline-block;\r\n        padding-left: .2rem;\r\n        border-left: 1px solid #F2F2F2;\r\n    }\r\n    .payment-left h3{\r\n        margin-bottom: .15rem;\r\n        font-size: .28rem;\r\n    }\r\n    .payment .right-img{\r\n        right: .2rem;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Payment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.payments.length)?_c('div',_vm._l((_vm.payments),function(item,index){return _c('div',{key:index,staticClass:\"payment\",on:{\"click\":function($event){return _vm.payment(item.code)}}},[_c('img',{staticClass:\"payment-img\",attrs:{\"src\":item.img}}),_vm._v(\" \"),_c('div',{staticClass:\"payment-left\"},[_c('h3',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),(item.code === 'balancepay')?_c('p',[_vm._v(\"当前余额: \"+_vm._s(_vm.money))]):_c('p',[_vm._v(_vm._s(item.memo))])]),_vm._v(\" \"),_c('img',{staticClass:\"right-img\",attrs:{\"src\":require(\"../../static/image/right.png\")}})])}),0):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-8014715c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/Payment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-8014715c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Payment.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Payment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Payment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-8014715c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Payment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Payment.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"cashierdesk\">\r\n        <yd-cell-group>\r\n            <yd-cell-item>\r\n                <span slot=\"left\">订单类型</span>\r\n                <span slot=\"right\" v-html=\"type == 1 ? '商品订单' : '充值订单'\"></span>\r\n            </yd-cell-item>\r\n            <yd-cell-item v-if=\"type == 1\">\r\n                <span slot=\"left\">订单编号</span>\r\n                <span slot=\"right\">{{ ids }}</span>\r\n            </yd-cell-item>\r\n            <yd-cell-item>\r\n                <span slot=\"left\">订单金额</span>\r\n                <span slot=\"right\">￥{{ money }}</span>\r\n            </yd-cell-item>\r\n        </yd-cell-group>\r\n        <payment :payments=\"payments\" @pay=\"pay\" :money=\"userInfo.balance\"></payment>\r\n        <yd-popup class=\"payresult\"\r\n        v-model=\"popShow\"\r\n        position=\"center\"\r\n        width=\"70%\"\r\n        :close-on-masker=\"false\"\r\n        >\r\n            <div>\r\n                <div class=\"payresult-i\">请确认微信支付是否已完成</div>\r\n                <div class=\"payresult-i\" @click=\"completed\">已完成支付</div>\r\n                <div class=\"payresult-i\" @click=\"heavyLoad\">支付遇到问题,重新支付</div>\r\n            </div>\r\n        </yd-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport payment from '../../components/Payment.vue'\r\nexport default {\r\n    components: {\r\n        payment\r\n    },\r\n    // inject: ['reload'],\r\n    data () {\r\n        return {\r\n            ids: this.$route.query.ids, // 订单号\r\n            type: this.$route.query.type || 1, // 订单类型\r\n            money: this.$route.query.recharge || 0, // 充值单要充值的金额\r\n            order_amount: '', // 订单总价\r\n            payments: [], // 商户可支付的方式列表\r\n            userInfo: {}, // 用户信息\r\n            popShow: false,\r\n            // payType: this.$route.query.pay_type || '', //支付方式\r\n            // payname: this.$route.query.pay_type || '',\r\n            // timer: ''\r\n        }\r\n    },\r\n    created () {\r\n        // this.orderDetail()\r\n        // this.getUserInfo()\r\n        // if(this.pay_type!=''){\r\n        //     if (this.pay_type == 'weixin') {\r\n        //         this.payname = '微信支付'\r\n        //         this.paymentedHandle()\r\n        //     } else if (this.pay_type == 'alipay') {\r\n        //         this.payname = '支付宝支付'\r\n        //         this.paymentedHandle()\r\n        //     }\r\n        //\r\n        // } else {\r\n        //     if(this.popShow) {\r\n        //         this.popShow = false\r\n        //     }\r\n        // }\r\n        // this.timer = setInterval(() => {\r\n        //     this.getOrderInfo()\r\n        // },3000)\r\n        if (this.ids && this.type == 1) {\r\n            // 商品订单\r\n            this.orderDetail()\r\n        } else if (this.money && this.type == 2) {\r\n            // 充值订单 获取用户id\r\n            // this.getUserInfo()\r\n        } else {\r\n            this.$dialog.toast({\r\n                mes: '订单支付参数错误',\r\n                timeout: 1300,\r\n                callback: () => {\r\n                    this.$router.go(-1)\r\n                }\r\n            })\r\n        }\r\n\r\n        this.getUserInfo()\r\n        this.getPaymentType()\r\n    },\r\n    computed: {\r\n        payType: {\r\n            get () {\r\n\r\n            },\r\n            set (val) {\r\n                if (val === 'weixin') {\r\n                    this.popShow = true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        // 获取订单详情\r\n        orderDetail () {\r\n            this.$api.orderDetail({order_id: this.ids}, res => {\r\n                this.money = res.data.order_amount\r\n            })\r\n        },\r\n        // 获取支付方式列表\r\n        getPaymentType () {\r\n            this.$api.paymentList({}, res => {\r\n                let data = res.data\r\n\r\n                // 过滤非线上支付方式\r\n                if (this.GLOBAL.isWeiXinBrowser()) {\r\n                    // h5支付并且是在微信浏览器内 过滤支付宝支付\r\n                    data = data.filter(item => item.code !== 'alipay')\r\n                }\r\n\r\n                // 如果是充值订单 过滤余额支付及线下支付\r\n                if (this.type == 2) {\r\n                    data = data.filter(item => item.code !== 'balancepay' && item.is_online === 1)\r\n                }\r\n\r\n                data.forEach(item => {\r\n                    this.$set(item, 'img', './static/image/' + item.code + '.png')\r\n                })\r\n                this.payments = data\r\n            })\r\n        },\r\n        getUserInfo () {\r\n            this.$api.userInfo({}, res => {\r\n                if (res.status) {\r\n                    this.userInfo = res.data\r\n                }\r\n            })\r\n        },\r\n        // 根据code 区分支付方式\r\n        pay (code) {\r\n            let data = {\r\n                ids: this.ids,\r\n                payment_code: code,\r\n                payment_type: this.type\r\n            }\r\n            if (code === 'wechatpay') {\r\n                let isWeiXin = this.GLOBAL.isWeiXinBrowser()\r\n                if (isWeiXin) {\r\n                    // 公众号支付参数\r\n                    if (this.type == 1 && this.ids) {\r\n                        // 微信jsapi支付\r\n                        data['params'] = {\r\n                            trade_type: 'JSAPI_OFFICIAL'\r\n                        }\r\n                    } else if (this.type == 2 && this.money) {\r\n                        data['params'] = {\r\n                            money: this.money\r\n                        }\r\n                    }\r\n\r\n                    // 微信jsapi支付\r\n                    this.$api.pay(data, res => {\r\n                        if (res.status) {\r\n                            const data = res.data\r\n                            let _this = this\r\n                            WeixinJSBridge.invoke(\r\n                                'getBrandWCPayRequest', {\r\n                                    'appId': data.appid, // 公众号名称，由商户传入\r\n                                    'timeStamp': data.timeStamp, // 时间戳，自1970年以来的秒数\r\n                                    'nonceStr': data.nonceStr, // 随机串\r\n                                    'package': data.package,\r\n                                    'signType': data.signType, // 微信签名方式：\r\n                                    'paySign': data.paySign // 微信签名\r\n                                },\r\n                                function (res) {\r\n                                    if (res.err_msg === 'get_brand_wcpay_request:ok') {\r\n                                        if (_this.type == 1) {\r\n                                            _this.$router.replace({path: '/payresult', query: {order_id: _this.ids}})\r\n                                        } else if (_this.type == 2) {\r\n                                            _this.$router.replace({path: '/balance'})\r\n                                        }\r\n                                        // _this.$dialog.alert({\r\n                                        //     mes: '支付成功',\r\n                                        //     callback () {\r\n                                        //         _this.$router.replace({path: '/payresult', query: {order_id: _this.orderId}})\r\n                                        //     }\r\n                                        // })\r\n                                        // 使用以上方式判断前端返回,微信团队郑重提示：\r\n                                        // res.err_msg将在用户支付成功后返回ok，但并不保证它绝对可靠。\r\n                                    }\r\n                                })\r\n                        }\r\n                    })\r\n                } else {\r\n                    // h5端支付参数\r\n                    if (this.type == 1 && this.ids) {\r\n                        data['params'] = {\r\n                            trade_type: 'MWEB',\r\n                            return_url: this.GLOBAL.locationHost() + '/#/cashierdesk?ids=' + this.ids + '&type=' + this.type + '&pay_type=weixin'\r\n                        }\r\n                    } else if (this.type == 2 && this.money) {\r\n                        data['params'] = {\r\n                            trade_type: 'MWEB',\r\n                            money: this.money,\r\n                            return_url: this.GLOBAL.locationHost() + '/#/cashierdesk?ids=' + this.ids + '&type=' + this.type + '&pay_type=weixin'\r\n                        }\r\n                    }\r\n                    // 微信h5支付\r\n                    this.$api.pay(data, res => {\r\n                        if (res.status) {\r\n                            this.payType = 'weixin'\r\n                            location.href = res.data.mweb_url\r\n                        } else {\r\n                            this.$dialog.alert({mes: res.msg})\r\n                        }\r\n                    })\r\n                }\r\n            } else if (code === 'alipay') {\r\n                // 支付宝支付\r\n                if (this.type == 1 && this.ids) {\r\n                    data['params'] = {\r\n                        trade_type: 'WAP',\r\n                        return_url: this.GLOBAL.locationHost() + '/#/payresult?order_id=' + this.ids\r\n                    }\r\n                } else if (this.type == 2 && this.money) {\r\n                    data['params'] = {\r\n                        money: this.money,\r\n                        return_url: this.GLOBAL.locationHost() + '/#/balance'\r\n                    }\r\n                }\r\n\r\n                this.$api.pay(data, res => {\r\n                    if (res.status) {\r\n                        this.StandardPost(res.data.url, res.data.data)\r\n                    }\r\n                })\r\n            } else if (code === 'balancepay') {\r\n                // 余额支付\r\n                this.$api.pay(data, res => {\r\n                    if (res.status) {\r\n                        this.$router.replace({path: '/payresult', query: {order_id: this.ids}})\r\n                    }\r\n                })\r\n            } else if (code === 'offline') {\r\n                // 线下支付\r\n                this.$dialog.confirm({\r\n                    title: '线下支付说明',\r\n                    mes: '请联系客服进行线下支付',\r\n                    opts: [\r\n                        {\r\n                            txt: '订单详情',\r\n                            color: false,\r\n                            callback: () => {\r\n                                this.$router.push({path: '/orderdetail', query: {order_id: this.ids}})\r\n                            }\r\n                        },\r\n                        {\r\n                            txt: '继续购物',\r\n                            color: true,\r\n                            callback: () => {\r\n                                this.$router.push('/index')\r\n                            }\r\n                        }\r\n                    ]\r\n\r\n                })\r\n            }\r\n        },\r\n\t    // 查询订单详情 获取订单支付状态\r\n        // getOrderInfo () {\r\n        //     let data = {\r\n        //         order_id: this.orderIds\r\n        //     }\r\n        //     this.$api.orderDetail(data, res => {\r\n        //         this.orderInfo = res.data\r\n        //         if(this.orderInfo.pay_status === 2){\r\n        //             clearInterval(this.timer)\r\n        //             this.$router.replace({path: '/payresult', query: {order_id: this.orderIds}})\r\n        //         }\r\n        //     })\r\n        // },\r\n        // alipay 模拟get提交\r\n        StandardPost (url, data) {\r\n            let tempForm = document.createElement('form')\r\n            tempForm.id = 'aliPay'\r\n            tempForm.methods = 'post'\r\n            tempForm.action = url\r\n            tempForm.target = '_self'\r\n            let input = []\r\n            for (let k in data) {\r\n                input[k] = document.createElement('input')\r\n                input[k].type = 'hidden'\r\n                input[k].name = k\r\n                input[k].value = data[k]\r\n                tempForm.appendChild(input[k])\r\n            }\r\n            tempForm.addEventListener('submit', function () {}, false)\r\n            document.body.appendChild(tempForm)\r\n            tempForm.dispatchEvent(new Event('submit'))\r\n            tempForm.submit()\r\n            document.body.removeChild(tempForm)\r\n        },\r\n        // 微信H5支付完成后触发的弹窗事件\r\n        // paymentedHandle () {\r\n        //     this.popShow = true\r\n        // },\r\n        // 支付完后点击跳转\r\n        completed () {\r\n            this.popShow = false // 关闭弹窗\r\n            if (this.type == 1) {\r\n                this.$router.replace({path: '/payresult', query: {order_id: this.ids}})\r\n            } else {\r\n                this.$router.replace({path: '/balance'})\r\n            }\r\n        },\r\n        // 支付遇到问题重新刷新页面\r\n        heavyLoad () {\r\n            this.popShow = false // 关闭弹窗\r\n            this.$router.replace({path: '/cashierdesk', query: {ids: this.ids, type: this.type}})\r\n        }\r\n    },\r\n    watch: {\r\n        // pay_type () {\r\n        //     if (pay_type === 'weixin') {\r\n        //         this.payname = '微信支付'\r\n        //     }\r\n        //\r\n        //     if (pay_type === 'alipay') {\r\n        //         this.payname = '支付宝支付'\r\n        //     }\r\n        //     this.paymentedHandle()\r\n        // }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .payresult .yd-popup-center .yd-popup-content{\r\n        text-align: center;\r\n        /* padding: 20px 0; */\r\n        background-color: #fff;\r\n        border-radius: 5px;\r\n    }\r\n    .payresult-i{\r\n        border-bottom: 1px solid #e8e8e8;\r\n        padding: 15px\r\n    }\r\n    .payresult-i:nth-child(2){\r\n        color: #ff3b44;\r\n    }\r\n    .payresult-i:last-child{\r\n        border: none;\r\n        color: #999;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/order/CashierDesk.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cashierdesk\"},[_c('yd-cell-group',[_c('yd-cell-item',[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_vm._v(\"订单类型\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"right\"},domProps:{\"innerHTML\":_vm._s(_vm.type == 1 ? '商品订单' : '充值订单')},slot:\"right\"})]),_vm._v(\" \"),(_vm.type == 1)?_c('yd-cell-item',[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_vm._v(\"订单编号\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_vm._v(_vm._s(_vm.ids))])]):_vm._e(),_vm._v(\" \"),_c('yd-cell-item',[_c('span',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_vm._v(\"订单金额\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"right\"},slot:\"right\"},[_vm._v(\"￥\"+_vm._s(_vm.money))])])],1),_vm._v(\" \"),_c('payment',{attrs:{\"payments\":_vm.payments,\"money\":_vm.userInfo.balance},on:{\"pay\":_vm.pay}}),_vm._v(\" \"),_c('yd-popup',{staticClass:\"payresult\",attrs:{\"position\":\"center\",\"width\":\"70%\",\"close-on-masker\":false},model:{value:(_vm.popShow),callback:function ($$v) {_vm.popShow=$$v},expression:\"popShow\"}},[_c('div',[_c('div',{staticClass:\"payresult-i\"},[_vm._v(\"请确认微信支付是否已完成\")]),_vm._v(\" \"),_c('div',{staticClass:\"payresult-i\",on:{\"click\":_vm.completed}},[_vm._v(\"已完成支付\")]),_vm._v(\" \"),_c('div',{staticClass:\"payresult-i\",on:{\"click\":_vm.heavyLoad}},[_vm._v(\"支付遇到问题,重新支付\")])])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-29805456\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/order/CashierDesk.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29805456\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./CashierDesk.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CashierDesk.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./CashierDesk.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29805456\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./CashierDesk.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order/CashierDesk.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}