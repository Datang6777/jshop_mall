(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-member-balance-add_bankcard"],{"007a":function(e,i,t){var a=t("a564");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=t("4f06").default;n("037cd669",a,!0,{sourceMap:!1,shadowMode:!1})},"25dd":function(e,i,t){"use strict";t.r(i);var a=t("d5f8"),n=t.n(a);for(var c in a)"default"!==c&&function(e){t.d(i,e,function(){return a[e]})}(c);i["default"]=n.a},4021:function(e,i,t){"use strict";var a,n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",[t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.pickerShow,expression:"pickerShow"}],staticClass:"picker-mask",attrs:{catchtouchmove:"true"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.closePicker.apply(void 0,arguments)}}}),t("v-uni-view",{staticClass:"picker-content",class:{pickerShow:e.pickerShow}},[t("v-uni-view",{staticClass:"picker-button"},[t("v-uni-text",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.closePicker.apply(void 0,arguments)}}},[e._v("取消")]),t("v-uni-text",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.confirm.apply(void 0,arguments)}}},[e._v("确定")])],1),t("v-uni-picker-view",{staticClass:"picker-view",attrs:{"indicator-class":"picker-view-selected-three",value:e.pickerIndex},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.pickerViewChangeThree.apply(void 0,arguments)}}},[t("v-uni-picker-view-column",e._l(e.pickerList,function(i,a){return t("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(i.label))])}),1),t("v-uni-picker-view-column",e._l(e.pickerList[e.pickerIndex[0]].children,function(i,a){return t("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(i.label))])}),1),t("v-uni-picker-view-column",e._l(e.pickerList[e.pickerIndex[0]].children[e.pickerIndex[1]].children,function(i,a){return t("v-uni-view",{key:a,staticClass:"picker-item"},[e._v(e._s(i.label))])}),1)],1)],1)],1)},c=[];t.d(i,"b",function(){return n}),t.d(i,"c",function(){return c}),t.d(i,"a",function(){return a})},5802:function(e,i,t){"use strict";var a=t("007a"),n=t.n(a);n.a},"7dfe":function(e,i,t){"use strict";var a=t("8ab2"),n=t.n(a);n.a},"8ab2":function(e,i,t){var a=t("ba38");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=t("4f06").default;n("041d22c1",a,!0,{sourceMap:!1,shadowMode:!1})},"8d5f":function(e,i,t){"use strict";t.r(i);var a=t("fec4"),n=t("e6b7");for(var c in n)"default"!==c&&function(e){t.d(i,e,function(){return n[e]})}(c);t("5802");var s,r=t("f0c5"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"cbf75104",null,!1,a["a"],s);i["default"]=l.exports},"99c4":function(e,i,t){"use strict";var a=t("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(t("b95a")),c={components:{areaPicker:n.default},data:function(){return{bankName:"",cardType:1,cardTypeName:"",bankCode:"",accountBank:"",cardNumber:"",name:"",mobile:"",region:["北京市","北京市","东城区"],areaId:110101,address:"",is_def:2,checked:!1,pickerValue:"",defaultIndex:[0,0,0],submitStatus:!1}},computed:{},methods:{showThreePicker:function(){this.$refs.areaPicker.showPicker()},onConfirm:function(e){var i=this,t=e[0].name,a=e[1].name,n=e[2].name;this.pickerValue=e[0].name+" "+e[1].name+" "+e[2].name;var c={province_name:t,city_name:a,county_name:n};this.$api.getAreaId(c,function(e){e.status?i.areaId=e.data:uni.showModal({title:"提示",content:"地区选择出现问题，请重新选择地区",showCancel:!1})})},defaultChange:function(){this.checked=!this.checked,this.is_def=1===this.is_def?2:1},saveShip:function(){var e=this;if(this.id&&0!=this.id){var i={id:this.id,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};i["area_id"]=this.areaId,this.$api.editShip(i,function(i){i.status?e.$common.successToShow("编辑成功",function(){uni.navigateBack({delta:1})}):e.$common.errorToShow(i.msg)})}else{var t={area_id:this.areaId,name:this.name,address:this.address,mobile:this.mobile,is_def:this.is_def};this.$api.saveUserShip(t,function(i){i.status?e.$common.successToShow("添加成功",function(){uni.navigateBack({delta:1})}):e.$common.errorToShow(i.msg)})}},checkCard:function(){var e=this;if(this.cardNumber){var i={card_code:this.cardNumber};this.$api.getBankCardOrganization(i,function(i){if(i.status){var t=i.data;e.bankName=t.name,e.cardType=t.type,e.bankCode=t.bank_code,e.cardTypeName=t.type_name}else e.$common.errorToShow(i.msg,function(){e.bankCode=e.bankName=e.cardType=e.cardTypeName=""})})}else this.bankCode=this.bankName=this.cardType=this.cardTypeName=""},addCard:function(){var e=this;if(this.cardNumber)if(this.bankName&&this.cardType&&this.bankCode)if(/^[\u4E00-\u9FA5\uf900-\ufa2d·s]{2,30}$/.test(this.name))if(this.areaId)if(this.accountBank){this.submitStatus=!0;var i={bankName:this.bankName,areaId:this.areaId,accountBank:this.accountBank,accountName:this.name,bankCode:this.bankCode,cardNumber:this.cardNumber,cardType:this.cardType,isDefault:this.is_def};this.$api.addBankCard(i,function(i){i.status?e.$common.successToShow(i.msg,function(e){uni.navigateBack({delta:1})}):e.$common.errorToShow(i.msg)},function(i){e.submitStatus=!1})}else this.$common.errorToShow("请输入开户银行信息");else this.$common.errorToShow("请选择开户行所在地区");else this.$common.errorToShow("请输入正确的持卡人名称");else this.$common.errorToShow("请输入正确的银行卡号");else this.$common.errorToShow("请输入银行卡号")}},onLoad:function(e){e.ship_id?(this.id=e.ship_id,this.getShipInfo()):this.pickerValue=this.region[0]+" "+this.region[1]+" "+this.region[2]},onBackPress:function(){if(this.$refs.areaPicker.pickerShow)return this.$refs.areaPicker.closePicker(),!0}};i.default=c},a564:function(e,i,t){i=e.exports=t("2350")(!1),i.push([e.i,".user-head[data-v-cbf75104]{height:%?100?%}.user-head-img[data-v-cbf75104]{height:%?90?%;width:%?90?%;border-radius:50%}.cell-hd-title[data-v-cbf75104]{color:#333}.cell-item-hd[data-v-cbf75104]{width:%?180?%}.cell-item-bd[data-v-cbf75104]{color:#666;font-size:%?26?%}.button-bottom .btn[data-v-cbf75104]{width:50%}.right-img .cell-item-ft[data-v-cbf75104]{right:%?26?%}\n",""])},b95a:function(e,i,t){"use strict";t.r(i);var a=t("4021"),n=t("25dd");for(var c in n)"default"!==c&&function(e){t.d(i,e,function(){return n[e]})}(c);t("7dfe");var s,r=t("f0c5"),l=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"25d82585",null,!1,a["a"],s);i["default"]=l.exports},ba38:function(e,i,t){i=e.exports=t("2350")(!1),i.push([e.i,".picker-mask[data-v-25d82585]{position:fixed;top:0;right:0;left:0;bottom:0;z-index:50;width:100%;height:100%;background-color:rgba(0,0,0,.3)}.picker-content[data-v-25d82585]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;position:fixed;bottom:0;left:0;z-index:100;width:100%;height:%?600?%;background-color:#fff;-webkit-transform:translateY(100%);transform:translateY(100%);-webkit-transition:all .2s ease;transition:all .2s ease}.pickerShow[data-v-25d82585]{-webkit-transform:translateY(0)!important;transform:translateY(0)!important}.picker-content .picker-button[data-v-25d82585]{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?80?%;line-height:%?80?%}.picker-button uni-text[data-v-25d82585]{width:%?180?%;font-size:%?28?%;font-weight:500;display:block;text-align:center;overflow:hidden}.picker-button uni-text[data-v-25d82585]:first-child{color:#a1a1a1;float:left}.picker-button uni-text[data-v-25d82585]:last-child{color:#ff7159;float:right}.picker-content .picker-view[data-v-25d82585]{width:100%;height:%?500?%}.picker-content .picker-view-selected-one[data-v-25d82585],.picker-content .picker-view-selected-three[data-v-25d82585],.picker-content .picker-view-selected-two[data-v-25d82585]{height:%?68?%;line-height:%?68?%;border-top:#1aad19 %?1?% solid;border-bottom:#1aad19 %?1?% solid}.picker-content .picker-view-selected-one[data-v-25d82585]{position:relative;left:25%;width:50%}.picker-content .picker-view-selected-two[data-v-25d82585]{position:relative;left:15%;width:70%}.picker-content .picker-view-selected-three[data-v-25d82585]{position:relative;left:5%;width:90%}.picker-view .picker-item[data-v-25d82585]{width:100%;height:34px;line-height:34px;font-size:15px;font-weight:600;display:block;text-align:center}",""])},d5f8:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("c5f6");var a={name:"area-picker",props:{areaId:{type:Number,required:!0},defaultIndex:{type:Array,required:!0,validator:function(e){return e.length>0&&e.length<=3}}},data:function(){return{pickerIndex:[0,0,0],pickerShow:!1,region:["河南省","郑州市","中原区"],provinceKey:-1,cityKey:-1,areaKey:-1,selectedData:[],pickerList:this.$db.get("areaList"),province:this.$db.get("areaList")}},created:function(){this.init()},watch:{mode:function(){this.pickerIndex=this.defaultIndex}},methods:{init:function(){this.province=this.$db.get("areaList"),this.getFullPath(this.areaId,this.province),this.pickerIndex=[this.provinceKey,this.cityKey,this.areaKey]},getFullPath:function(e,i){for(var t=0;t<i.length;t++)if(e==i[t].value){if(!i[t].children)return this.areaKey=t,!0;if(i[t].hasOwnProperty("children"))return i[t].children[0]&&!i[t].children[0].children?(this.cityKey=t,!0):(this.provinceKey=t,!0)}else if(i[t].hasOwnProperty("children")&&(void 0!==i[t].children[0]&&(i[t].children[0].hasOwnProperty("children")?this.provinceKey=t:this.cityKey=t),"undefined"!=typeof i[t].children)){var a=this.getFullPath(e,i[t].children);if(a)return!0}},pickerViewChangeThree:function(e){var i=e.detail.value;this.pickerList[i[0]].children.length-1<i[1]&&(i[1]=this.pickerList[i[0]].children.length-1),this.pickerList[i[0]].children[i[1]].children.length-1<i[2]&&(i[2]=this.pickerList[i[0]].children[i[1]].children.length-1),this.pickerIndex=i},showPicker:function(){uni.hideKeyboard(),this.init(),this.pickerShow=!0},confirm:function(){this.pickerShow=!1,this.selectedData=[{id:this.province[this.pickerIndex[0]].value,name:this.province[this.pickerIndex[0]].label},{id:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].value,name:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].label},{id:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].children[this.pickerIndex[2]].value,name:this.province[this.pickerIndex[0]].children[this.pickerIndex[1]].children[this.pickerIndex[2]].label}],this.$emit("onConfirm",this.selectedData)},closePicker:function(){this.pickerShow=!1}}};i.default=a},e6b7:function(e,i,t){"use strict";t.r(i);var a=t("99c4"),n=t.n(a);for(var c in a)"default"!==c&&function(e){t.d(i,e,function(){return a[e]})}(c);i["default"]=n.a},fec4:function(e,i,t){"use strict";var a,n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",{staticClass:"content"},[t("v-uni-view",{staticClass:"content-top"},[t("v-uni-view",{staticClass:"cell-group"},[t("v-uni-view",{staticClass:"cell-item cell-item-mid"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行卡号")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"number",focus:!0,placeholder:"请输入银行卡号"},on:{blur:function(i){arguments[0]=i=e.$handleEvent(i),e.checkCard()}},model:{value:e.cardNumber,callback:function(i){e.cardNumber=i},expression:"cardNumber"}})],1)],1),t("v-uni-view",{staticClass:"cell-item cell-item-mid"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("持卡人")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",placeholder:"请输入持卡人姓名"},model:{value:e.name,callback:function(i){e.name=i},expression:"name"}})],1)],1),t("v-uni-view",{staticClass:"cell-item cell-item-mid"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行名称")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",disabled:!0},model:{value:e.bankName,callback:function(i){e.bankName=i},expression:"bankName"}})],1)],1),t("v-uni-view",{staticClass:"cell-item cell-item-mid"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("银行卡类型")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",disabled:!0},model:{value:e.cardTypeName,callback:function(i){e.cardTypeName=i},expression:"cardTypeName"}})],1)],1),t("v-uni-view",{staticClass:"cell-item cell-item-mid"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("开户行名")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{staticClass:"cell-bd-input",attrs:{type:"text",placeholder:"请输入开户银行名"},model:{value:e.accountBank,callback:function(i){e.accountBank=i},expression:"accountBank"}})],1)],1),t("v-uni-view",{staticClass:"cell-item cell-item-mid right-img"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("开户行地址")])],1),t("v-uni-view",{staticClass:"cell-item-bd"},[t("v-uni-input",{attrs:{value:e.pickerValue},on:{focus:function(i){arguments[0]=i=e.$handleEvent(i),e.showThreePicker.apply(void 0,arguments)}}}),t("area-picker",{ref:"areaPicker",attrs:{areaId:e.areaId,defaultIndex:e.defaultIndex},on:{onConfirm:function(i){arguments[0]=i=e.$handleEvent(i),e.onConfirm.apply(void 0,arguments)}}})],1),t("v-uni-view",{staticClass:"cell-item-ft"},[t("v-uni-image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/ic-pull-down.png"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.showThreePicker.apply(void 0,arguments)}}})],1)],1),t("v-uni-view",{staticClass:"cell-item"},[t("v-uni-view",{staticClass:"cell-item-hd"},[t("v-uni-view",{staticClass:"cell-hd-title"},[e._v("设为默认")])],1),t("v-uni-view",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.defaultChange.apply(void 0,arguments)}}},[t("v-uni-view",{staticClass:"cell-item-ft"},[t("v-uni-label",{staticClass:"radio"},[t("v-uni-radio",{attrs:{value:"1",checked:e.checked,color:"#333"}})],1)],1)],1)],1)],1)],1),t("v-uni-view",{staticClass:"button-bottom"},[t("v-uni-button",{staticClass:"btn btn-square btn-b",attrs:{"hover-class":"btn-hover2",disabled:e.submitStatus,loading:e.submitStatus},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.addCard.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)},c=[];t.d(i,"b",function(){return n}),t.d(i,"c",function(){return c}),t.d(i,"a",function(){return a})}}]);