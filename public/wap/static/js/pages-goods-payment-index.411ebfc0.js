(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-payment-index"],{"19d5":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.tools=e.checkLogin=e.jumpBackPage=e.goBack=e.goods=e.orders=void 0;var n=a(i("a4bb")),s={mounted:function(){},methods:{orderDetail:function(t){this.$common.navigateTo("/pages/member/order/orderdetail?order_id="+t)},toPay:function(t){this.$common.navigateTo("/pages/goods/payment/index?order_id="+t+"&type=1")},toEvaluate:function(t){this.$common.navigateTo("/pages/member/order/evaluate?order_id="+t)},showExpress:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=encodeURIComponent("code="+t+"&no="+e+"&add="+i);this.$common.navigateTo("/pages/member/order/express_delivery?params="+a)}}};e.orders=s;var o={mounted:function(){},methods:{goodsDetail:function(t){this.$common.navigateTo("/pages/goods/index/index?id="+t)},goodsList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/pages/classify/index";(0,n.default)(t).length&&(e=this.$common.builderUrlParams(e,t)),this.$common.navigateTo(e)},groupDetail:function(t,e){this.$common.navigateTo("/pages/goods/index/group?id="+t+"&group_id="+e)},pintuanDetail:function(t,e){e?this.$common.navigateTo("/pages/goods/index/pintuan?id="+t+"&team_id="+e):this.$common.navigateTo("/pages/goods/index/pintuan?id="+t)}}};e.goods=o;var r={onBackPress:function(t){if("navigateBack"===t.from)return!1;var e=["/pages/cart/index/index","/pages/member/index/index"],i=this.$store.state.redirectPage;return e.indexOf(i)>-1?(this.$store.commit({type:"redirect",page:""}),uni.switchTab({url:"/pages/index/index"}),!0):void 0}};e.goBack=r;var c={methods:{handleBack:function(){var t=this.$store.state.redirectPage;this.$store.commit({type:"redirect",page:""});var e=["/pages/index/index","/pages/member/index/index"];e.indexOf(t)>-1?uni.switchTab({url:t}):t?uni.redirectTo({url:t}):uni.switchTab({url:"/pages/index/index"})}}};e.jumpBackPage=c;var d={methods:{checkIsLogin:function(){uni.showToast({title:"请先登录！",icon:"none",duration:800,success:function(t){setTimeout(function(){uni.hideToast(),uni.navigateTo({url:"/pages/login/login/index1"})},800)}})}}};e.checkLogin=d;var l={methods:{copyData:function(t){var e=this;uni.setClipboardData({data:t,success:function(){e.$common.errorToShow("复制成功")}})}}};e.tools=l},"1b99":function(t,e,i){"use strict";var a=i("82bd"),n=i.n(a);n.a},"203a":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ac6a"),i("c5f6");var a=i("94b4"),n={props:{orderId:{type:String,default:function(){return""}},recharge:{type:Number,default:function(){return 0}},uid:{type:Number,default:function(){return 0}},type:{type:Number,default:function(){return 1}}},data:function(){return{payments:[],openid:"",popShow:!1}},mounted:function(){this.getPayments()},methods:{getPayments:function(){var t=this;this.$api.paymentList({},function(e){e.status&&(t.payments=t.formatPayments(e.data))})},formatPayments:function(t){var e=this;return this.$common.isWeiXinBrowser()&&(t=t.filter(function(t){return"alipay"!==t.code})),2===this.type&&(t=t.filter(function(t){return"balancepay"!==t.code||1===t.is_online})),t.forEach(function(t){e.$set(t,"icon","/static/image/"+t.code+".png")}),t},checkWXJSBridge:function(t){var e=this,i=setInterval(function(){"undefined"!=typeof window.WeixinJSBridge&&(clearTimeout(i),e.onBridgeReady(t))},200)},onBridgeReady:function(t){var e=this;window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appid,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(i){"get_brand_wcpay_request:ok"===i.err_msg?e.$common.successToShow("支付成功"):"get_brand_wcpay_request:cancel"===i.err_msg?e.$common.errorToShow("取消支付"):e.$common.errorToShow("支付失败"),setTimeout(function(){e.$common.redirectTo("/pages/goods/payment/result?id="+t.payment_id)},1e3)})},toPayHandler:function(t){var e=this;this.popShow=!0;var i={payment_code:t,payment_type:this.type};switch(i["ids"]=1==this.type||5==this.type||6==this.type?this.orderId:this.uid,t){case"alipay":1==this.type&&this.orderId?i["params"]={trade_type:"WAP",return_url:a.baseUrl+"wap/pages/goods/payment/result"}:2==this.type&&this.recharge?i["params"]={money:this.recharge,return_url:a.baseUrl+"wap/pages/goods/payment/result"}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,function(t){if(t.status){var e=t.data.url,i=t.data.data,a=document.createElement("form");a.id="aliPay",a.methods="post",a.action=e,a.target="_self";var n=[];for(var s in i)n[s]=document.createElement("input"),n[s].type="hidden",n[s].name=s,n[s].value=i[s],a.appendChild(n[s]);a.addEventListener("submit",function(){},!1),document.body.appendChild(a),a.dispatchEvent(new Event("submit")),a.submit(),document.body.removeChild(a)}});break;case"wechatpay":var n=this.$common.isWeiXinBrowser();if(n){var s=a.baseUrl+"wap/pages/goods/payment/auth?order_id="+this.orderId+"&type="+this.type;1==this.type&&this.orderId?i["params"]={trade_type:"JSAPI_OFFICIAL",url:s}:2==this.type&&this.recharge?i["params"]={trade_type:"JSAPI_OFFICIAL",money:this.recharge,url:s+"&uid="+this.uid+"&money="+this.recharge}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,function(t){if(t.status||"10066"!=t.data){var i=t.data;e.checkWXJSBridge(i)}else window.location.href=t.msg})}else 1==this.type&&this.orderId?i["params"]={trade_type:"MWEB",return_url:a.baseUrl+"wap/pages/goods/payment/result"}:2==this.type&&this.recharge?i["params"]={trade_type:"MWEB",money:this.recharge,return_url:a.baseUrl+"wap/pages/goods/payment/result"}:5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,function(t){t.status?location.href=t.data.mweb_url:e.$common.errorToShow(t.msg)});break;case"balancepay":5!=this.type&&6!=this.type||!this.recharge||(i["params"]={formid:this.orderId}),this.$api.pay(i,function(t){t.status?e.$common.redirectTo("/pages/goods/payment/result?id="+t.data.payment_id):e.$common.errorToShow(t.msg)});break;case"offline":this.$common.modelShow("线下支付说明","请联系客服进行线下支付",function(){},!1,"取消","确定");break}},popBtn:function(){this.popShow=!1}}};e.default=n},"55dd3":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cell-group payment-method"},[t._l(t.payments,function(e){return 2!=t.type||"balancepay"!=e.code?i("v-uni-view",{key:e.code,staticClass:"cell-item add-title-item cell-item-mid right-img",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.toPayHandler(e.code)}}},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-image",{staticClass:"cell-hd-icon",attrs:{src:e.icon}})],1),i("v-uni-view",{staticClass:"cell-item-bd cell-item-bd-block"},[i("v-uni-view",{staticClass:"cell-bd-view"},[i("v-uni-text",{staticClass:"cell-bd-text"},[t._v(t._s(e.name))])],1),i("v-uni-view",{staticClass:"cell-bd-view"},[i("v-uni-text",{staticClass:"cell-bd-text address"},[t._v(t._s(e.memo))])],1)],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-image",{staticClass:"cell-ft-next icon",attrs:{src:"/static/image/right.png"}})],1)],1):t._e()}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.popShow,expression:"popShow"}],staticClass:"payment-pop"},[i("v-uni-view",{staticClass:"payment-pop-c"},[i("v-uni-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:"/static/image/wait-pay.png"}}),i("v-uni-view",{staticClass:"text"},[t._v("支付中，请稍后...")])],1),i("v-uni-view",{staticClass:"payment-pop-b"},[i("v-uni-button",{staticClass:"btn btn-c",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.popBtn.apply(void 0,arguments)}}},[t._v("支付失败")]),i("v-uni-button",{staticClass:"btn btn-o",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.popBtn.apply(void 0,arguments)}}},[t._v("支付成功")])],1)],1)],2)},s=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return a})},"5cfb":function(t,e,i){"use strict";var a=i("630b"),n=i.n(a);n.a},"630b":function(t,e,i){var a=i("c928");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("8a5d6a2a",a,!0,{sourceMap:!1,shadowMode:!1})},"6e9a":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".margin-cell-group[data-v-cc39b200]{margin-bottom:%?20?%}.cell-hd-title[data-v-cc39b200]{color:#999}.payment-method .cell-item-hd[data-v-cc39b200]{min-width:%?70?%}.payment-method .cell-hd-icon[data-v-cc39b200]{width:%?70?%;height:%?70?%}.payment-method .cell-item-bd[data-v-cc39b200]{border-left:%?2?% solid #f0f0f0;padding-left:%?30?%}.payment-method .cell-bd-text[data-v-cc39b200]{font-size:%?28?%;color:#666}.payment-method .address[data-v-cc39b200]{font-size:%?24?%;color:#999}.flex-item[data-v-cc39b200]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.flex-item .cell-item-ft[data-v-cc39b200]{position:relative;top:0;-webkit-transform:translateY(0);transform:translateY(0);right:0}",""])},"6f39":function(t,e,i){"use strict";i.r(e);var a=i("ccca3"),n=i("f716");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("1b99");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"cc39b200",null,!1,a["a"],o);e["default"]=c.exports},"7c33":function(t,e,i){"use strict";i.r(e);var a=i("203a"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},"82bd":function(t,e,i){var a=i("6e9a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("9d599e12",a,!0,{sourceMap:!1,shadowMode:!1})},c644:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c5f6");var n=a(i("ccca")),s=i("19d5"),o={mixins:[s.orders],data:function(){return{orderId:0,recharge:0,type:1,orderInfo:{},userInfo:{},form_id:0}},components:{paymentsByH5:n.default},onLoad:function(t){this.orderId=t.order_id,this.recharge=Number(t.recharge),this.type=Number(t.type),this.form_id=Number(t.form_id),this.orderId&&1==this.type?this.getOrderInfo():this.recharge&&2==this.type?this.getUserInfo():!this.form_id||5!=this.type&&6!=this.type?this.$common.errorToShow("订单支付参数错误",function(){uni.navigateBack({delta:1})}):this.orderId=""+this.form_id},methods:{getOrderInfo:function(){var t=this,e={ids:this.orderId,payment_type:this.type};this.$api.paymentsCheckpay(e,function(e){e.status&&(t.orderInfo=e.data)})},getUserInfo:function(){var t=this;this.$api.userInfo({},function(e){e.status?t.userInfo=e.data:t.$common.errorToShow(e.msg)})},toRecharge:function(){this.$common.navigateTo("/pages/member/balance/index")}}};e.default=o},c928:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".payment-method .cell-item-hd[data-v-d62e9174]{min-width:%?70?%}.payment-method .cell-hd-icon[data-v-d62e9174]{width:%?70?%;height:%?70?%}.payment-method .cell-item-bd[data-v-d62e9174]{border-left:%?2?% solid #f0f0f0;padding-left:%?30?%}.payment-method .cell-bd-text[data-v-d62e9174]{font-size:%?28?%;color:#666}.payment-method .address[data-v-d62e9174]{font-size:%?24?%;color:#999}.payment-pop[data-v-d62e9174]{position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?400?%;height:%?272?%;background-color:#fff;text-align:center;box-shadow:0 0 %?20?% #ccc\n\t/* border-radius: 10rpx; */}.payment-pop-c[data-v-d62e9174]{padding:%?50?% %?30?%;\n\t/* line-height: 300rpx; */font-size:%?32?%;color:#999}.payment-pop-b[data-v-d62e9174]{position:absolute;bottom:0;display:-webkit-box;display:-webkit-flex;display:flex;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.payment-pop-b .btn[data-v-d62e9174]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.payment-pop .text[data-v-d62e9174]{font-size:%?24?%}",""])},ccca:function(t,e,i){"use strict";i.r(e);var a=i("55dd3"),n=i("7c33");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("5cfb");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"d62e9174",null,!1,a["a"],o);e["default"]=c.exports},ccca3:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"cell-group margin-cell-group"},[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[t._v("订单类型")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[1==t.type?i("v-uni-text",{staticClass:"cell-ft-p"},[t._v("商品订单")]):t._e(),2==t.type?i("v-uni-text",{staticClass:"cell-ft-p",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.toRecharge()}}},[t._v("充值订单")]):t._e(),5==t.type?i("v-uni-text",{staticClass:"cell-ft-p"},[t._v("快捷下单")]):t._e(),6==t.type?i("v-uni-text",{staticClass:"cell-ft-p"},[t._v("付款码")]):t._e()],1)],1),1==t.type?i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item flex-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[t._v("订单编号")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},t._l(t.orderInfo.rel,function(e,a){return i("v-uni-view",{key:a,staticClass:"cell-ft-p",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.orderDetail(e.source_id)}}},[t._v(t._s(e.source_id||""))])}),1)],1),i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[t._v("支付金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[t._v("￥"+t._s(t.orderInfo.money||""))])],1)],1)],1):2==t.type?i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[t._v("充值金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[t._v("￥ "+t._s(t.recharge||""))])],1)],1)],1):i("v-uni-view",[i("v-uni-view",{staticClass:"cell-item"},[i("v-uni-view",{staticClass:"cell-item-hd"},[i("v-uni-view",{staticClass:"cell-hd-title"},[t._v("支付金额")])],1),i("v-uni-view",{staticClass:"cell-item-ft"},[i("v-uni-text",{staticClass:"cell-ft-p red-price"},[t._v("￥ "+t._s(t.recharge||""))])],1)],1)],1)],1),i("payments-by-h5",{attrs:{orderId:t.orderId,recharge:t.recharge,type:t.type,uid:t.userInfo.id}})],1)},s=[];i.d(e,"b",function(){return n}),i.d(e,"c",function(){return s}),i.d(e,"a",function(){return a})},f716:function(t,e,i){"use strict";i.r(e);var a=i("c644"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a}}]);