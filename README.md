# Jshop小程序商城


#### 项目介绍

Jshop小程序商城，是一款开源的电商系统，包含微信小程序、支付宝小程序、APP、公众号、H5端、PC端、抖音小程序、今日头条小程序、皮皮虾小程序、西瓜视频小程序，为大中小企业提供移动电子商务优秀的解决方案。

后台采用Thinkphp5.1框架开发，执行效率、扩展性、稳定性值得信赖。并且Jshop小程序商城上手难度低，可大量节省定制化开发周期。

前台使用uni-app开发，适配性多，在页面的打开和渲染效率上更快，下单流程流畅自然，可大大增加用户体验，提升订单量。

强大的促销引擎，多种促销方式自由搭配，满足各种场景的促销方式需求，做活动更灵活简单，并且在促销的扩展上也非常方便。


### 前台模板介绍

uni-app简约序模板，全新UI设计，更多交互细节，我们倾尽全力为您提供更加流畅舒爽的体验，增加对支付宝小程序、APP的支持，实现一个后台，管理10个前端。

同时又实现了一套前端代码，发布多个平台，为您的业务可以提供更加强有力的支撑！


#### 关于开源
这不是一款免费的系统，商用记得授权哦。

为什么开源但是不免费，一方面是可以让我们有持续维护下去的动力和资源，另外一方面也是不想让您有后顾之忧，避免后期纠纷。

我们的团队水平有限，也是在探索中学习、改进。之所以开源，就是为了方便大家，也是为了提升下该项目的质量，我们相信有您的参与，可以使我们的系统更加完善和健壮。

从我工作以来，见过太多的优秀免费系统，因为坚持不下去失去维护，还有的前期免费后来又变成收费，所谓的承诺变来变去还不如一开始就收费，所以我们开源但不免费。

#### 功能介绍

 + 商品管理，单规格、多规格商品管理，品牌、分类管理、商品评价
 + 订单管理，订单支付、发货、取消、售后等
 + 会员管理，会员列表、消息管理、用户等级等
 + 运营管理，广告管理、文章管理
 + 微信管理，小程序管理、微信公众号管理、模板列表、公众号菜单管理
 + 促销管理，商品促销、订单促销、优惠券、团购秒杀、拼团管理
 + 财务管理，支付单、退款单管理、提现管理、账户资金、发票管理
 + 控制面板，计划任务、插件、图片、地区、消息、店铺配置、支付方式、配送方式、物流公司管理。信任登录插件、阿里云OSS插件、阿里云短信插件、微信消息模板插件、分销功能
 + 门店管理，门店列表。门店核销、店员管理、提货单管理。
 + 智能表单，表单列表、表单统计、表单提交管理、表单小程序码等
 + 统计报表，商品销量统计、财务收款统计、订单销量统计
 + 页面管理，布局管理，页面可视化操作



#### 智能表单说明
智能表单包含有：订单、付款码、留言、反馈、登记、调研这几种类型，可实现店铺收款、门店内扫码下单、活动预约、活动预定、会议登记、在线报名、上课签到等等。

智能表单可以为您的线上线下结合提供更强大的助力。

#### 项目演示
- uniapp简约模板项目地址：https://gitee.com/hnjihai/uniapp
- uniapp简约模板体验地址：https://demo.jihainet.com/wap
- 前台H5演示：[https://b2c.jihainet.com/](https://b2c.jihainet.com/)
- 后台演示：[https://b2c.jihainet.com/manage/](https://b2c.jihainet.com/manage/)
- QQ交流群：823732583（开发手册、接口文档、操作手册请进群查看哦~）
- 交流社区：[https://bbs.jihainet.com/](https://bbs.jihainet.com/)
- 小程序体验二维码

![输入图片说明](https://images.gitee.com/uploads/images/2018/1018/184408_a1c0d706_8503.jpeg "gh_03bc4364b4dc_344.jpg")

- 简约模板体验二维码

![输入图片说明](https://gitee.com/uploads/images/2019/0409/182147_ecec17d7_8503.png "1554805258.png")


- 安卓APP体验二维码【可进群下载体验】

![输入图片说明](https://images.gitee.com/uploads/images/2018/1026/163026_31132341_8503.png "1540542519.png")



#### 项目截图
![输入图片说明](https://images.gitee.com/uploads/images/2018/1019/104933_383a7831_8503.png "img(1).png")
#### 后台截图
![输入图片说明](https://images.gitee.com/uploads/images/2018/1019/104952_d154e8b4_8503.png "首页.png")
![输入图片说明](https://images.gitee.com/uploads/images/2018/1019/105206_a2dfa9e2_8503.png "商品列表.png")
![输入图片说明](https://images.gitee.com/uploads/images/2018/1019/105222_7caa99b6_8503.png "添加商品.png")
![输入图片说明](https://images.gitee.com/uploads/images/2018/1019/105317_82da6a34_8503.png "添加优惠券.png")


#### 目录结构
初始的目录结构如下：
~~~
wwwroot  WEB部署目录（或者子目录）
├─addons                应用插件目录
├─application           应用目录
│  ├─api                api接口模块目录
│  ├─b2c                前台模块
│  ├─common             公共模块目录
│  ├─crontab            定时任务目录
│  ├─job                任务队列目录
│  ├─manage             后台管理目录
│  ├─wechat             接收微信消息目录
│  ├─command.php        命令行工具配置文件
│  ├─common.php         公共函数文件
│  ├─tags.php           应用行为扩展定义文件
│
├─config                配置文件目录
├─public                WEB目录（对外访问目录）
│  ├─install            自动安装目录
│  ├─static             前台静态文件
│  ├─wap                前台手机端运行目录
│  ├─index.php          入口文件
│  └─.htaccess          用于apache的重写
│
├─thinkphp              thinkphp框架系统目录
├─update                版本升级包
├─extend                扩展类库目录
├─runtime               应用的运行时目录（可写，可定制）
├─vendor                第三方类库目录（Composer依赖库）
├─uni-app               前端源码（支持微信小程序、支付宝小程序、APP、公众号、H5端、PC端、抖音小程序、今日头条小程序、皮皮虾小程序、西瓜视频小程序）
├─build.php             自动生成定义文件（参考）
├─composer.json         composer 定义文件
├─LICENSE.txt           授权说明文件
├─README.md             README 文件
├─think                 命令行入口文件
├─crontab               定时任务命令行入口文件
~~~

#### 更新说明
2020-02-09 v2.2.0
1. 修复下架商品显示问题
2. 富文本编辑插件问题修复
3. 支付宝小程序和抖音小程序兼容发票和地址选择问题优化
4. 快递鸟插件优化
5. 修复店铺地址的bug
6. 优化发货为0的时候的提示信息
7. 修复未开启店铺自提的时候的报错问题
8. 修复在ios上余额充值支付不通过的问题
9. 增加插件的菜单权限
10. 修复导航分组组件无法选择文章分类的问题
11. 修复余额充值充不上的bug
12. 修复拼团搜索bug
13. 文章详情增加上一篇下一篇
14. 优惠券增加领取限制
15. 优惠券数量问题优化
16. 增加首页图片组件点击领取优惠券
17. 团购秒杀增加每人限购多少件，商品活动库存
18. 拼团增加限购数量
19. 页面管理增加描述
20. 文章管理优化
21. 修复订单筛选tab切换bug
22. 发货明细优化
23. 搜索框样式修改
24. 商品详情页商品详情优化
25. 文章编辑文本框修复
26. 修复售后退货确认签收的bug
27. 修复首页单图组件不能跳转的问题
28. 后端弹窗大小优化，可以根据当前显示器分辨率来适配
29. 图片橱窗组件优化
30. 定时任务增加命令行模式
31. 修复阿里云短信插件催付模板
32. 修复阿里云短信已知的一些bug
33. 增加腾讯云cos图片存储引擎
34. 批量支付，合并发货样式调整
35. 修复扩展分类开启后不选择的bug
36. 修复表单表单无法充值的问题
37. 优化0元订单生成的时候直接支付成功
38. 首页增加订阅提醒功能
39. 订阅消息提示机制优化
40. 移除taskphp
41. 修复发货单导出报错，修复导出校验错误
42. 增加腾讯云短信插件
43. 售后问题优化
44. 评论星级不显示的问题优化
45. 修复升级自定义编译组件之后搜索框在小程序中不浮动的问题
46. 删除重复多于的订单列表获取接口代码
47. 删除用户同步删除user_wx表
48. 首页增加tabbar组件
49. 退款金额优化
50. 手机端商品详情页文字描述放到后台控制
51. 优化发货单导出
52. 修复前台拼团按钮点击的一个bug
53. app收货地址编辑问题修复
54. 商品详情接口，品牌预加载优化
55. 分类页广告位优化
56. 微信支付支持服务商模式（微信支付重大升级，费率更低，联系客服申请）
57. 发货后扣减库存bug优化
58. 优化只能表单日期问题
59. 优化订单配货单上面数量显示
60. 修复商品无设置重量，设置部分地区，首重为0续重有值，运费为负数的问题
61. 修复商品类型选择参数，参数过多的时候显示的问题
62. 优化商品库存被下架，订单提交 页面商品为空的情况
63. 后台首页会员统计优化
64. 分销中心优化
65. 修复拼团倒计时不显示问题
66. 分享功能重构（url分享，二维码，海报等）
67. 打印购物清单、配货清单改为货品编号
68. 一些已知的页面优化

2019-11-20 v2.1.0
更新日志
1. 修改伪静态，更好的兼容h5端和pc端及后台，详见https://www.jihainet.com/index/article/index/id/106.html
2. 订单售后流程优化，从根本上解决售后的各种问题
3. 订单发货流程优化，兼容部分发货和合并批量发货，优化发货单模块
4. 后台订单列表页售后信息显示优化
5. 文章分类模块优化
6. 文章上面增加描述和点击量字段
7. 发票流程优化，前后端把发票单独拎出来
8. 登陆注册页面增加用户协议和隐私条款，后台平台设置里面可以配置
9. 前端支付页面接口调整，直接请求支付单接口
10. 后台layui框架升级到2.5.5
11. 前端个人中心样式调整，兼容两种样式
12. uni-app编译模式从非自定义模式修改成自定义模式
13. 修改一些已知的bug
14. 前端模板uni-app从独立git库移到当前项目根目录下/uni-app,这样以后前后端版本可以对应起来了。
15. 后台左侧菜单调整

2019-09-28 v2.0.7
更新日志
1.  修复页面团购秒杀过期问题
2. 修复表单编辑问题
3. 普通分销插件细节优化
4. 修复商品自定义规格问题
5. 优化订单取消自动脚本
6. 优化订单自动完成脚本
7. 优化后台订单列表订单类型筛选
8. 页面可视化编辑优化
9. 优化支付宝小程序登陆接口
10. 统一处理后台报错提示信息，当没有权限的时候，友好的报错。
11. 修改商品列表标签造成js报错的问题
12. 增加抽奖插件（需付费）
13. 优化uni-app版本页面url方式，把#号拿掉了
14. 使用积分核销记录增加备注
15. 新增支付宝在线退款功能
16. 商品下架不允许加入购物车，不允许在购物车列表显示
17. 保证接口统一访问地址api.html,之前可以直接访问接口，现在修复了
18. 优化可视化编辑，拼团和促销为空的问题
19. 后台管理员页面翻页优化
20. 余额充值问题优化
21. 插件配置优化
22. 优惠券增加变更领取人
23. 会员列表弹框报错修复
24. 快递鸟插件顺丰优化
25. 修复快递查询出错的bug
26. 优化后台列表高度
27. 修复大数据量或者网络不好使劲提交订单的时候，订单明细为空的bug
28. 修复插件api登陆判断未带token的时候，mysql报错的问题
29. 增加清楚应用缓存设置，模板缓存
30. 优化公众号关注回复
31. 优化没有挂载点的时候，插件安装失败的问题
32. 修复卸载插件的时候时候，钩子无法去除的bug
33. 后台订单统计和财务统计加上汇总
34. 图片表增加阿里云类型
35. 优化页面排版数据过多的问题
36. 修复支付和登陆微信不一致导致无法支付的问题
37. 修复提货单任命查询的问题
38. 增加视频和视频播放功能
39. 商品编辑，商品简介去掉多于冒号，配送方式满多少包邮提示语修复
40. 修复异常情况下商品评论不显示的bug
41. 修复批量打印快递单无弹窗的bug
42. 内置短信模板增加参数备注，用迈信等短信通道想修改短信内容的话，很简单了。
43. 后台商品分类修改的时候，增加父分类较远，防止陷入死循环
44. 修复不绑定手机号时无邀请人的bug
45. 支付的时候，支付名称修改，取商品名称
46. 修复商品类型，参数全部取消时报错的处理。
47. 优化库存描述语
48. 添加商品时，商品分类的显示优化
49. 表单表表bug修复
50. 只能表单增加导出功能
51. 地区表增加邮编
52. 登陆日志增加用户名
53. 商品增加快捷上下架，商品列表排序优化
54. 增加定时删除7天前日志的功能，增加操作日志批量删除功能
55. 修复团购秒杀可以添加多个出校条件的问题
56. 后台样式细节优化


#### 环境要求
- Nginx/Apache/IIS
- PHP7.0-7.2
- MySQL5.5+

建议使用环境：Linux + Nginx1.14 + PHP7.0 + MySQL5.6

#### 部署说明

[安装部署](https://gitee.com/hnjihai/jshop_mall/wikis/%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2?sort_id=881805)

#### nginx 伪静态配置，apache请勿使用此配置
~~~
    location /wap/ {
        	try_files $uri /wap/index.html;
    }
    location / {
        if (!-e $request_filename){
            rewrite  ^(.*)$  /index.php?s=$1  last;   break;
        }
    }
~~~

#### Apache 伪静态配置
~~~
    <IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^wap/(.*) /wap/index.html [QSA,PT,L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond $1 !^(wap)
    RewriteRule ^(.*)$ index.php?s=/$1 [QSA,PT,L]
    </IfModule>
~~~

#### 定时任务配置
- Linux执行Shell命令
```
# 定时取消未支付订单
php think jshop cancle

# 定时催付即将被取消的订单
php think jshop remind

# 定时签收已发货订单
php think jshop sign

# 定时评价已签收订单
php think jshop evaluate

# 定时完成已评价订单
php think jshop complete

# 定时取消拼团失败的订单
php think jshop pintuan_cancle

# 定时清理后台操作日志
php think jshop remove_op_log
```
注意1： **think** 必须指定到项目根目录下的 **think** 文件。  
注意2： Shell命令下的php确保版本在7.0.* ~ 7.3.*之间，其他php版本可能会出现未知错误。  


#### 安全&缺陷




